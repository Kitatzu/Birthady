---
import Square from "./Square.astro";
---

<script>
  let currentSquare = null;
  let currentPContainer = null;

  function closeContent(square) {
    if (square.id === currentSquare.id) {
      currentPContainer.classList.add("hidden");
      // Elimina la l√≠nea que establece currentPContainer a null
    }
  }

  function toggleContent(square) {
    const newPContainer = square.querySelector(".p_container");

    if (newPContainer.classList.contains("hidden")) {
      newPContainer.classList.remove("hidden");
      newPContainer.style.opacity = 0;
      setTimeout(() => {
        newPContainer.style.opacity = 1;
      }, 10);
    } else {
      newPContainer.classList.add("hidden");
    }

    if (currentSquare) {
      closeContent(currentSquare);
    }

    currentSquare = square;
    currentPContainer = newPContainer;
  }

  // Declaraci√≥n de la variable squares
  let squares = document.querySelectorAll(".square");

  // Utiliza la API de reactividad de Astro para volver a adjuntar los event listeners
  $: squares = document.querySelectorAll(".square");
  $: squares.forEach((square) => {
    square.addEventListener("click", () => {
      toggleContent(square);
    });
  });
</script>

<section id="momentos">
  <h1 class="section_tittle">Algunos momentos especiales...</h1>
  <div class="square_container">
    <Square id="1" img="/ProfileImages/Juli.jpg">
      <strong> Juli:</strong> Ah! Que hermosos momentos hemos atravesado con este
      ser de luz, tal vez recuerden momentos como cuando anduvimos en kayak, cuando
      chocamos pu√±os epicamente en la cumbre de una monta√±a, cuando se lanz√≥ de palomita
      desde un colectivo o como cuando ante nuestra estupefacta mirada y con absoluta
      impavidez procedi√≥ a agregar ¬°¬°¬°EDULCORANTE EN LA CHOCOLATADA!!!
    </Square>
    <Square id="2" img="/ProfileImages/Esther.jpg">
      <strong> Esther:</strong> Me da pena pero hasta hace dos a√±os pensaba que te
      llamabas Maria por que en todos lados tenias Maru xd ajajajaja
    </Square>
    <Square id="3" img="/ProfileImages/Joel.jpg">
      <strong> Joel:</strong> Cuando fuimos a desayunar, solo te conoc√≠a a trav√©s
      de lo que Exe me hab√≠a contado. Sin embargo, al ponerle cara a esa persona
      y observar tus pensamientos, pude apreciar lo valiosa que eres. Comprend√≠ por
      qu√© est√°s con Eze; eres una persona digna de inversi√≥n, con m√∫ltiples capacidades,
      adem√°s de ser generosa, divertida, emp√°tica y reflexiva.
    </Square>
    <Square id="4" img="/ProfileImages/Flor.jpg">
      <strong> Flor:</strong> Las videollamadas post rendir virtual y vos toda brotada
      y roja cual tomate üòÇüòÇ
    </Square>
    <Square id="5" img="/ProfileImages/Tefa.jpg">
      <strong> Tefa:</strong> depende, qui√©n va a leer esto? se va a mostrar como
      presentaci√≥n de power point en su cumplea√±os? la verdad siento que con more
      hemos ido al infierno y el recorrido de vuelta juntas, ya no recuerdo c√≥mo
      era mi vida antes de que nos conoci√©ramos (y tampoco quiero!) la verdad podr√≠a
      recordar cualquier cosa (creo) pero voy a usar la oportunidad para mencionar
      que cuando nos fuimos de viaje de egresados al final ya no nos aguantabamos‚ù§Ô∏è
      te amo amigaaaa
    </Square>
    <Square id="6" img="/ProfileImages/Nora.jpg">
      <strong> Nora:</strong> Lorem ipsum dolor sit amet consectetur adipisicing
      elit. Fugiat corporis deleniti perspiciatis libero reiciendis adipisci eos
      non. Repellendus, consectetur? In veritatis alias nam enim porro veniam dolorum
      laborum nihil possimus.
    </Square>
    <Square id="7" img="/ProfileImages/Cande.jpg">
      <strong> Cande:</strong> Lorem ipsum dolor sit amet consectetur adipisicing
      elit. Fugiat corporis deleniti perspiciatis libero reiciendis adipisci eos
      non. Repellendus, consectetur? In veritatis alias nam enim porro veniam dolorum
      laborum nihil possimus.
    </Square>
    <Square id="8" img="/ProfileImages/Delfi.jpg">
      <strong> Delfi:</strong> Lorem ipsum dolor sit amet consectetur adipisicing
      elit. Fugiat corporis deleniti perspiciatis libero reiciendis adipisci eos
      non. Repellendus, consectetur? In veritatis alias nam enim porro veniam dolorum
      laborum nihil possimus.
    </Square>
    <Square id="9" img="/cat1.png">
      <strong> Valen:</strong> Lorem ipsum dolor sit amet consectetur adipisicing
      elit. Fugiat corporis deleniti perspiciatis libero reiciendis adipisci eos
      non. Repellendus, consectetur? In veritatis alias nam enim porro veniam dolorum
      laborum nihil possimus.
    </Square>
    <Square id="10" img="/cat1.png">
      <strong> Tato:</strong> Lorem ipsum dolor, sit amet consectetur adipisicing
      elit. Consequuntur aliquam eos dolorum iure culpa vel, fugit laudantium voluptas
      amet sint tempore sunt mollitia rem quibusdam architecto repudiandae error
      natus quos.
    </Square>
    <Square id="11" img="/ProfileImages/Jack.jpg">
      <strong> Jacqui:</strong> Siempre voy a guardar en mi memoria las mejores vacaciones
      del mundo! Las sesiones de fotos en la monta√±a, cuando casi te caiste mientras
      te hac√≠as la vlogger, cuando nos corri√≥ la avispa por el cerro y las veces
      que nos metimos al lago helado para disimular üòÇ
    </Square>
  </div>
</section>

<style>
  section {
    height: 100vh;
    margin-bottom: 10rem;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    text-align: center;
    gap: 4rem;
    color: #55493c;
  }

  .section_tittle {
    position: relative;
    font-weight: bold;
  }

  h1::after {
    position: absolute;
    content: "";
    background-color: #55493c;
    left: 20px;
    top: 30px;
    height: 2px;
    width: 80%;
  }

  .square_container {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 5rem;
  }

  strong {
    font-size: 0.9rem;
  }

  @media (width < 768px) {
    section {
      margin-bottom: 20rem;
    }

    .section_tittle {
      font-size: 0.9rem;
    }

    .square_container {
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
    }

    strong {
      font-size: 0.8rem;
    }
  }
</style>
